<!DOCTYPE html>
<html lang="en">

<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Icons</title>
        <style>
                /* Base variables and styles */
                :root {
                        --icon-size: 1em;
                        --icon-stroke: 1.6;
                        --icon-color: currentColor;
                        --icon-accent: #58a6ff;
                        --icon-danger: #ff4d4f;
                        --icon-warn: #e0a210;
                        --icon-success: #31c48d;
                        --icon-muted: #8b949e;
                        --icon-transition: 120ms;

                        /* UI variables */
                        --surface-bg: #f8f9fa;
                        --text-color: #333;
                        --border-color: #ddd;
                        --hover-bg: #f0f0f0;
                        --active-bg: #e9ecef;
                        --panel-bg: #f0f2f5;
                }

                /* Dark mode support */
                @media (prefers-color-scheme: dark) {
                        :root {
                                --surface-bg: #1a1a1a;
                                --text-color: #e0e0e0;
                                --border-color: #444;
                                --hover-bg: #2c2c2c;
                                --active-bg: #3a3a3a;
                                --panel-bg: #252525;
                        }
                }

                body {
                        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
                        line-height: 1.5;
                        margin: 0;
                        padding: 0;
                        color: var(--text-color);
                        background-color: var(--surface-bg);
                }

                /* Icon styles */
                .icon {
                        width: var(--icon-size);
                        height: var(--icon-size);
                        display: inline-block;
                        vertical-align: middle;
                        stroke: var(--icon-color);
                        stroke-width: var(--icon-stroke);
                        stroke-linecap: round;
                        stroke-linejoin: round;
                        fill: none;
                        transition: stroke var(--icon-transition), transform var(--icon-transition);
                }

                .icon-sm {
                        --icon-size: 16px;
                }

                .icon-md {
                        --icon-size: 32px;
                }

                .icon-lg {
                        --icon-size: 48px;
                }

                .icon-xl {
                        --icon-size: 64px;
                }

                /* Icon grid container */
                .icons-container {
                        max-width: 1200px;
                        margin: 0 auto;
                        padding: 20px;
                }

                .header {
                        margin-bottom: 20px;
                        padding-bottom: 10px;
                        border-bottom: 1px solid var(--border-color);
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                }

                .header-actions {
                        display: flex;
                        align-items: center;
                        gap: 10px;
                }

                .header-actions .icon-item {
                        cursor: pointer;
                        padding: 8px;
                        border-radius: 6px;
                        transition: all 0.2s;
                }

                .header-actions .icon-item:hover {
                        background-color: var(--hover-bg);
                        transform: translateY(-2px);
                }

                .icon-grid {
                        display: grid;
                        grid-template-columns: repeat(auto-fill, minmax(64px, 1fr));
                        gap: 12px;
                }

                .icon-item {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        aspect-ratio: 1/1;
                        padding: 12px;
                        border: 1px solid var(--border-color);
                        border-radius: 6px;
                        background-color: var(--surface-bg);
                        cursor: pointer;
                        transition: all 0.2s;
                }

                .icon-item:hover {
                        background-color: var(--hover-bg);
                        transform: translateY(-2px);
                        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                }

                .icon-item.active {
                        border-color: var(--icon-accent);
                        background-color: var(--active-bg);
                }

                /* Color picker styles */
                .color-palette {
                        position: fixed;
                        top: 60px;
                        right: 20px;
                        background-color: var(--surface-bg);
                        border: 1px solid var(--border-color);
                        border-radius: 8px;
                        padding: 15px;
                        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                        z-index: 1000;
                        display: none;
                }

                .color-palette.active {
                        display: block;
                }

                .color-options {
                        display: grid;
                        grid-template-columns: repeat(3, 1fr);
                        gap: 8px;
                        margin-bottom: 15px;
                }

                .color-option {
                        width: 30px;
                        height: 30px;
                        border-radius: 4px;
                        cursor: pointer;
                        border: 1px solid var(--border-color);
                }

                .color-option:hover {
                        transform: scale(1.1);
                }

                .custom-color {
                        display: flex;
                        flex-direction: column;
                        gap: 8px;
                }

                .color-picker-title {
                        font-size: 14px;
                        margin-bottom: 10px;
                        font-weight: bold;
                }

                /* Palette icon indicator */
                .icon-item[data-icon-id="i-palette"].color-mode {
                        border-color: var(--icon-accent);
                        background-color: var(--active-bg);
                        box-shadow: 0 0 0 2px var(--icon-accent);
                }

                .btn {
                        padding: 8px 12px;
                        background: var(--surface-bg);
                        border: 1px solid var(--border-color);
                        border-radius: 4px;
                        cursor: pointer;
                        transition: all 0.2s;
                        color: var(--text-color);
                        display: inline-flex;
                        align-items: center;
                        gap: 8px;
                }

                .btn:hover {
                        background: var(--hover-bg);
                        border-color: var(--icon-accent);
                }

                /* Code display section */
                #code-section {
                        margin-top: 30px;
                        padding: 20px;
                        background: var(--panel-bg);
                        border-radius: 8px;
                        display: none;
                }

                #icon-preview {
                        margin-bottom: 15px;
                        display: flex;
                        justify-content: center;
                        padding: 20px;
                }

                pre {
                        background: var(--surface-bg);
                        padding: 15px;
                        border-radius: 6px;
                        overflow-x: auto;
                        margin: 0;
                }

                .actions-bar {
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        margin-bottom: 10px;
                }
        </style>
</head>

<body>
        <!-- Color Palette Panel -->
        <div class="color-palette" id="color-palette">
                <div class="color-picker-title">Change Icon Colors</div>
                <div class="color-options">
                        <div class="color-option" style="background-color: var(--text-color);" data-color="currentColor"
                                title="Default"></div>
                        <div class="color-option" style="background-color: var(--icon-accent);"
                                data-color="var(--icon-accent)" title="Accent"></div>
                        <div class="color-option" style="background-color: var(--icon-success);"
                                data-color="var(--icon-success)" title="Success"></div>
                        <div class="color-option" style="background-color: var(--icon-warn);"
                                data-color="var(--icon-warn)" title="Warning"></div>
                        <div class="color-option" style="background-color: var(--icon-danger);"
                                data-color="var(--icon-danger)" title="Danger"></div>
                        <div class="color-option" style="background-color: var(--icon-muted);"
                                data-color="var(--icon-muted)" title="Muted"></div>
                </div>
                <div class="custom-color">
                        <label for="custom-color-input">Custom Color:</label>
                        <input type="color" id="custom-color-input" value="#58a6ff">
                        <button id="apply-custom-color" class="btn">Apply</button>
                </div>
        </div>

        <div class="icons-container">
                <div class="header">
                        <h1>Icons</h1>
                        <div class="header-actions">
                                <div class="icon-item" data-icon-id="i-palette" title="i-palette">
                                        <svg class="icon icon-md">
                                                <use href="images/icons.svg#i-palette"></use>
                                        </svg>
                                </div>
                        </div>
                </div>

                <div class="icon-grid" id="icon-grid">
                        <!-- Icons will be populated by JavaScript -->
                </div>

                <!-- Code Display Section -->
                <div id="code-section">
                        <h2>Icon HTML</h2>
                        <div id="icon-preview"></div>
                        <div class="actions-bar">
                                <span>Copy this code to use the icon:</span>
                                <button class="btn" onclick="copyIconCode()">
                                        <svg class="icon icon-sm">
                                                <use href="images/icons.svg#i-clipboard"></use>
                                        </svg>
                                        Copy
                                </button>
                        </div>
                        <pre><code id="code-display"></code></pre>
                </div>
        </div>

        <script>
                const iconSpritePath = 'images/icons.svg';
                const iconGrid = document.getElementById('icon-grid');
                const colorPalette = document.getElementById('color-palette');
                const customColorInput = document.getElementById('custom-color-input');
                const applyCustomColorBtn = document.getElementById('apply-custom-color');
                const paletteIconInHeader = document.querySelector('.header-actions .icon-item');

                let colorModeActive = false;

                // Fetch the SVG sprite to get the list of icons
                fetch(iconSpritePath)
                        .then(response => {
                                if (!response.ok) {
                                        throw new Error(`Network response was not ok: ${response.statusText}`);
                                }
                                return response.text();
                        })
                        .then(data => {
                                const parser = new DOMParser();
                                const svgDoc = parser.parseFromString(data, 'image/svg+xml');
                                const symbols = svgDoc.querySelectorAll('symbol');

                                symbols.forEach(symbol => {
                                        const id = symbol.id;

                                        // Skip the palette icon as it's static in the header
                                        if (id === 'i-palette') return;

                                        const iconItem = document.createElement('div');
                                        iconItem.className = 'icon-item';
                                        iconItem.dataset.iconId = id;
                                        iconItem.setAttribute('title', id);

                                        const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                                        svg.classList.add('icon', 'icon-md');

                                        const use = document.createElementNS('http://www.w3.org/2000/svg', 'use');
                                        use.setAttribute('href', `${iconSpritePath}#${id}`);

                                        svg.appendChild(use);
                                        iconItem.appendChild(svg);
                                        iconGrid.appendChild(iconItem);
                                });
                        })
                        .catch(error => {
                                console.error('Error fetching or parsing SVG sprite:', error);
                                iconGrid.innerHTML = `<p style="color: var(--icon-danger);">Error: Could not load icons from <code>${iconSpritePath}</code>. Make sure the file exists and the path is correct.</p>`;
                        });

                // Function to generate icon HTML code with current styling
                function generateIconHTML(iconId) {
                        const currentColor = getComputedStyle(document.documentElement).getPropertyValue('--icon-color').trim();
                        const href = `${iconSpritePath}#${iconId}`;
                        let htmlCode;

                        if (currentColor !== 'currentColor' && currentColor !== '') {
                                htmlCode = `<svg class="icon icon-md" style="--icon-color: ${currentColor};">
  <use href="${href}"></use>
</svg>`;
                        } else {
                                htmlCode = `<svg class="icon icon-md">
  <use href="${href}"></use>
</svg>`;
                        }
                        return htmlCode;
                }

                // Function to change icon color globally
                function changeIconColor(color) {
                        document.documentElement.style.setProperty('--icon-color', color);

                        const activeIcon = document.querySelector('.icon-item.active');
                        if (activeIcon) {
                                const iconId = activeIcon.dataset.iconId;
                                const htmlCode = generateIconHTML(iconId);
                                document.getElementById('code-display').textContent = htmlCode;
                                document.getElementById('icon-preview').innerHTML = htmlCode;
                        }
                }

                // Function to toggle color palette
                function toggleColorPalette() {
                        colorPalette.classList.toggle('active');
                        colorModeActive = colorPalette.classList.contains('active');
                        paletteIconInHeader.classList.toggle('color-mode', colorModeActive);
                }

                paletteIconInHeader.addEventListener('click', (e) => {
                        e.stopPropagation();
                        toggleColorPalette();
                });

                iconGrid.addEventListener('click', (e) => {
                        const iconItem = e.target.closest('.icon-item');
                        if (!iconItem) return;

                        if (!colorModeActive) {
                                document.querySelectorAll('.icon-item.active').forEach(item => {
                                        item.classList.remove('active');
                                });
                                iconItem.classList.add('active');

                                const iconId = iconItem.dataset.iconId;
                                const htmlCode = generateIconHTML(iconId);

                                document.getElementById('code-display').textContent = htmlCode;
                                document.getElementById('code-section').style.display = 'block';
                                document.getElementById('icon-preview').innerHTML = htmlCode;
                        }
                });

                document.querySelectorAll('.color-option').forEach(option => {
                        option.addEventListener('click', () => {
                                changeIconColor(option.dataset.color);
                        });
                });

                applyCustomColorBtn.addEventListener('click', () => {
                        changeIconColor(customColorInput.value);
                });

                function copyIconCode() {
                        const codeText = document.getElementById('code-display').textContent;
                        navigator.clipboard.writeText(codeText)
                                .then(() => {
                                        const copyBtn = document.querySelector('#code-section .btn');
                                        const originalContent = copyBtn.innerHTML;
                                        copyBtn.innerHTML = `<svg class="icon icon-sm"><use href="${iconSpritePath}#i-check"></use></svg> Copied!`;
                                        setTimeout(() => {
                                                copyBtn.innerHTML = originalContent;
                                        }, 2000);
                                })
                                .catch(err => {
                                        console.error('Failed to copy: ', err);
                                });
                }

                document.addEventListener('click', (e) => {
                        if (colorModeActive && !e.target.closest('.color-palette')) {
                                toggleColorPalette();
                        }
                });
        </script>
</body>

</html>